"use strict";(self.webpackChunkultima_ng=self.webpackChunkultima_ng||[]).push([[8138],{8138:(Q,h,a)=>{a.r(h),a.d(h,{ChatAppModule:()=>j});var c=a(6895),l=a(433),g=a(359),e=a(1571),b=a(1135),C=a(529);let u=(()=>{var n;class s{constructor(t){this.http=t,this._activeUser={id:1,name:"Ioni Bowcher",image:"ionibowcher.png",status:"active",messages:[{text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit",ownerId:1,createdAt:1652646338240},{text:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",ownerId:1,createdAt:1652646368718},{text:"Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",ownerId:123,createdAt:1652646368718}],lastSeen:"2d"},this.activeUser=new b.X(this._activeUser),this.activeUser$=this.activeUser.asObservable()}getChatData(){return this.http.get("assets/demo/data/chat.json").toPromise().then(t=>t.data).then(t=>t)}changeActiveChat(t){this._activeUser=t,this.activeUser.next(t)}sendMessage(t){this._activeUser.messages.push(t),this.activeUser.next(this._activeUser)}}return(n=s).\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),s})();var m=a(1740);const _=function(n,s){return{"bg-green-400":n,"bg-red-400":s,"bg-yellow-400":"away"}};let w=(()=>{var n;class s{constructor(t){this.chatService=t}ngOnInit(){let t=this.user.messages.filter(o=>123!==o.ownerId);this.lastMessage=t[t.length-1]}changeView(t){this.chatService.changeActiveChat(t)}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-card"]],inputs:{user:"user"},decls:12,vars:8,consts:[["tabindex","0",1,"flex","flex-nowrap","justify-content-between","align-items-center","border-1","surface-border","border-round","p-3","cursor-pointer","select-none","hover:surface-hover","transition-colors","transition-duration-150",3,"keydown.enter","click"],[1,"flex","align-items-center"],[1,"relative","md:mr-3"],["alt","user",1,"w-3rem","h-3rem","border-circle","shadow-4",3,"src"],[1,"w-1rem","h-1rem","border-circle","border-2","surface-border","absolute",2,"bottom","2px","right","2px",3,"ngClass"],[1,"flex-column","hidden","md:flex"],[1,"text-900","font-semibold","block"],[1,"block","text-600","text-overflow-ellipsis","overflow-hidden","white-space-nowrap","w-10rem","text-sm"],[1,"text-700","font-semibold","ml-auto","hidden","md:inline"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.NdJ("keydown.enter",function(){return o.changeView(o.user)})("click",function(){return o.changeView(o.user)}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"img",3)(4,"span",4),e.qZA(),e.TgZ(5,"div",5)(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"span",7),e._uU(9),e.qZA()()(),e.TgZ(10,"span",8),e._uU(11),e.qZA()()),2&t&&(e.xp6(3),e.MGl("src","assets/demo/images/avatar/",o.user.image,"",e.LSH),e.xp6(1),e.Q6J("ngClass",e.WLB(5,_,"active"===o.user.status,"busy"===o.user.status)),e.xp6(3),e.Oqu(o.user.name),e.xp6(2),e.Oqu(o.lastMessage.text),e.xp6(2),e.Oqu(o.user.lastSeen))},dependencies:[c.mk],encapsulation:2}),s})();function Z(n,s){1&n&&e._UZ(0,"app-user-card",9),2&n&&e.Q6J("user",s.$implicit)}let T=(()=>{var n;class s{constructor(t){this.chatService=t,this.searchValue="",this.users=[],this.filteredUsers=[]}ngOnInit(){this.chatService.getChatData().then(t=>{this.users=t,this.filteredUsers=this.users})}filter(){let t=[];for(let o=0;o<this.users.length;o++){let i=this.users[o];0==i.name.toLowerCase().indexOf(this.searchValue.toLowerCase())&&t.push(i)}this.filteredUsers=[...t]}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat-sidebar"]],decls:10,vars:2,consts:[[1,"flex","flex-column","align-items-center","border-bottom-1","surface-border","p-6"],["src","assets/demo/images/avatar/circle/avatar-f-1@2x.png","alt","Asiya Javayant",1,"w-6rem","h-6rem","border-circle","shadow-4"],[1,"text-900","text-xl","font-semibold","mt-4"],[1,"w-full","flex","row-gap-4","flex-column","surface-border","p-4"],[1,"p-input-icon-left","w-full"],[1,"pi","pi-search"],["id","search","type","text","pInputText","","placeholder","Search",1,"w-full",3,"ngModel","ngModelChange","input"],[1,"flex","flex-row","gap-4","md:flex-column","overflow-auto"],[3,"user",4,"ngFor","ngForOf"],[3,"user"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"span",2),e._uU(3,"Asiya Javayant"),e.qZA()(),e.TgZ(4,"div",3)(5,"span",4),e._UZ(6,"i",5),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(p){return o.searchValue=p})("input",function(){return o.filter()}),e.qZA()(),e.TgZ(8,"div",7),e.YNc(9,Z,1,1,"app-user-card",8),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngModel",o.searchValue),e.xp6(2),e.Q6J("ngForOf",o.filteredUsers))},dependencies:[c.sg,l.Fj,l.JJ,l.On,m.o,w],encapsulation:2}),s})();var f=a(5593),A=a(805),x=a(2435),v=a(1795);function y(n,s){if(1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._UZ(2,"img",25),e.qZA(),e.TgZ(3,"div",26)(4,"p",27),e._uU(5),e.qZA(),e.TgZ(6,"span",28),e._uU(7),e.qZA(),e.TgZ(8,"p",29),e._uU(9),e._UZ(10,"i",30),e.qZA()()()),2&n){const r=e.oxw().$implicit,t=e.oxw();e.xp6(2),e.MGl("src","assets/demo/images/avatar/",t.user.image,"",e.LSH),e.xp6(3),e.Oqu(t.user.name),e.xp6(2),e.Oqu(r.text),e.xp6(2),e.Oqu(t.parseDate(r.createdAt))}}function U(n,s){if(1&n&&(e.TgZ(0,"div",23)(1,"div",31)(2,"span",32),e._uU(3),e.qZA(),e.TgZ(4,"p",29),e._uU(5),e._UZ(6,"i",30),e.qZA()()()),2&n){const r=e.oxw().$implicit,t=e.oxw();e.xp6(3),e.Oqu(r.text),e.xp6(2),e.hij("",t.parseDate(r.createdAt)," ")}}function M(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,y,11,4,"div",22),e.YNc(2,U,7,2,"div",22),e.qZA()),2&n){const r=s.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngIf",123!==r.ownerId),e.xp6(1),e.Q6J("ngIf",r.ownerId===t.defaultUserId)}}function S(n,s){if(1&n){const r=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){const i=e.CHM(r).$implicit,p=e.oxw(2);return e.MAs(23).hide(),e.KtG(p.onEmojiSelect(i))}),e.qZA()}2&n&&e.Q6J("label",s.$implicit)}function J(n,s){if(1&n&&e.YNc(0,S,1,1,"button",33),2&n){const r=e.oxw();e.Q6J("ngForOf",r.emojis)}}const B=function(n,s,r){return{"bg-green-400":n,"bg-red-400":s,"bg-yellow-400":r}};let k=(()=>{var n;class s{constructor(t){this.chatService=t,this.defaultUserId=123,this.textContent="",this.uploadedFiles=[],this.emojis=["\u{1f600}","\u{1f603}","\u{1f604}","\u{1f601}","\u{1f606}","\u{1f605}","\u{1f602}","\u{1f923}","\u{1f607}","\u{1f609}","\u{1f60a}","\u{1f642}","\u{1f643}","\u{1f60b}","\u{1f60c}","\u{1f60d}","\u{1f970}","\u{1f618}","\u{1f617}","\u{1f619}","\u{1f61a}","\u{1f92a}","\u{1f61c}","\u{1f61d}","\u{1f61b}","\u{1f911}","\u{1f60e}","\u{1f913}","\u{1f9d0}","\u{1f920}","\u{1f973}","\u{1f917}","\u{1f921}","\u{1f60f}","\u{1f636}","\u{1f610}","\u{1f611}","\u{1f612}","\u{1f644}","\u{1f928}","\u{1f914}","\u{1f92b}","\u{1f92d}","\u{1f925}","\u{1f633}","\u{1f61e}","\u{1f61f}","\u{1f620}","\u{1f621}","\u{1f92c}","\u{1f614}","\u{1f61f}","\u{1f620}","\u{1f621}","\u{1f92c}","\u{1f614}","\u{1f615}","\u{1f641}","\u{1f62c}","\u{1f97a}","\u{1f623}","\u{1f616}","\u{1f62b}","\u{1f629}","\u{1f971}","\u{1f624}","\u{1f62e}","\u{1f631}","\u{1f628}","\u{1f630}","\u{1f62f}","\u{1f626}","\u{1f627}","\u{1f622}","\u{1f625}","\u{1f62a}","\u{1f924}"]}setMessage(){if(this.user){let t=this.user.messages.filter(o=>o.ownerId!==this.defaultUserId);this.message=t[t.length-1]}}ngOnInit(){this.setMessage()}sendMessage(){if(""!=this.textContent&&" "!==this.textContent){let t={text:this.textContent,ownerId:123,createdAt:(new Date).getTime()};this.chatService.sendMessage(t),this.textContent=""}}onEmojiSelect(t){this.textContent+=t}parseDate(t){return new Date(t).toTimeString().split(":").slice(0,2).join(":")}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat-box"]],inputs:{user:"user"},decls:25,vars:10,consts:[[1,"flex","flex-column","h-full"],[1,"flex","align-items-center","border-bottom-1","surface-border","p-3","lg:p-6"],[1,"relative","flex","align-items-center","mr-3"],["alt","user.name",1,"w-4rem","h-4rem","border-circle","shadow-4",3,"src"],[1,"w-1rem","h-1rem","border-circle","border-2","surface-border","absolute","bottom-0","right-0",3,"ngClass"],[1,"mr-2"],[1,"text-900","font-semibold","block"],[1,"text-700"],[1,"flex","align-items-center","ml-auto"],["pButton","","pRipple","","type","button","icon","pi pi-phone",1,"p-button-rounded","p-button-outlined","p-button-secondary","mr-3"],["pButton","","pRipple","","type","button","icon","pi pi-ellipsis-v",1,"p-button-rounded","p-button-outlined","p-button-secondary"],[1,"p-3","md:px-4","lg:px-6","lg:py-4","mt-2","overflow-y-auto",2,"max-height","53vh",3,"scrollTop"],["chatWindow",""],[4,"ngFor","ngForOf"],[1,"p-3","md:p-4","lg:p-6","flex","flex-column","sm:flex-row","align-items-center","mt-auto","border-top-1","surface-border","gap-3"],["id","message","type","text","pInputText","","placeholder","Type a message",1,"flex-1","w-full","sm:w-auto","border-round",3,"ngModel","ngModelChange","keydown.enter"],[1,"flex","w-full","sm:w-auto","gap-3"],["pRipple","",1,"p-button","p-button-secondary","w-full","sm:w-auto","justify-content-center","text-xl",3,"click"],["pButton","","pRipple","","label","Send","icon","pi pi-send",1,"w-full","sm:w-auto",3,"click"],["styleClass","w-full sm:w-30rem"],["op",""],["pTemplate",""],["class","grid grid-nogutter mb-4",4,"ngIf"],[1,"grid","grid-nogutter","mb-4"],[1,"mr-3","mt-1"],["alt","user.name",1,"w-3rem","h-3rem","border-circle","shadow-4",3,"src"],[1,"col","mt-3"],[1,"text-900","font-semibold","mb-3"],[1,"text-700","inline-block","font-medium","border-1","surface-border","p-3","white-space-normal","border-round",2,"word-break","break-word","max-width","80%"],[1,"text-700","mt-3"],[1,"pi","pi-check","ml-2","text-green-400"],[1,"col","mt-3","text-right"],[1,"inline-block","text-left","font-medium","border-1","surface-border","bg-primary-100","text-primary-900","p-3","white-space-normal","border-round",2,"word-break","break-word","max-width","80%"],["pButton","","pRipple","","type","button","class","p-2 p-button-text text-2xl",3,"label","click",4,"ngFor","ngForOf"],["pButton","","pRipple","","type","button",1,"p-2","p-button-text","text-2xl",3,"label","click"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3)(4,"span",4),e.qZA(),e.TgZ(5,"div",5)(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"span",7),e._uU(9,"Last active 1 hour ago"),e.qZA()(),e.TgZ(10,"div",8),e._UZ(11,"button",9)(12,"button",10),e.qZA()(),e.TgZ(13,"div",11,12),e.YNc(15,M,3,2,"div",13),e.qZA(),e.TgZ(16,"div",14)(17,"input",15),e.NdJ("ngModelChange",function(d){return o.textContent=d})("keydown.enter",function(){return o.sendMessage()}),e.qZA(),e.TgZ(18,"div",16)(19,"button",17),e.NdJ("click",function(d){e.CHM(i);const N=e.MAs(23);return e.KtG(N.toggle(d))}),e._uU(20,"\u{1f600}"),e.qZA(),e.TgZ(21,"button",18),e.NdJ("click",function(){return o.sendMessage()}),e.qZA()()()(),e.TgZ(22,"p-overlayPanel",19,20),e.YNc(24,J,1,1,"ng-template",21),e.qZA()}if(2&t){const i=e.MAs(14);e.xp6(3),e.MGl("src","assets/demo/images/avatar/",o.user.image,"",e.LSH),e.xp6(1),e.Q6J("ngClass",e.kEZ(6,B,"active"===o.user.status,"busy"===o.user.status,"away"===o.user.status)),e.xp6(3),e.Oqu(o.user.name),e.xp6(6),e.Q6J("scrollTop",i.scrollHeight),e.xp6(2),e.Q6J("ngForOf",o.user.messages),e.xp6(2),e.Q6J("ngModel",o.textContent)}},dependencies:[c.mk,c.sg,c.O5,l.Fj,l.JJ,l.On,m.o,f.Hq,A.jx,x.T,v.H],encapsulation:2,changeDetection:0}),s})(),q=(()=>{var n;class s{constructor(t){this.chatService=t,this.subscription=this.chatService.activeUser$.subscribe(o=>this.activeUser=o)}ngOnDestroy(){this.subscription.unsubscribe()}}return(n=s).\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],decls:5,vars:1,consts:[[1,"flex","flex-column","md:flex-row","gap-5",2,"min-height","81vh"],[1,"md:w-25rem","card","p-0"],[1,"flex-1","card","p-0"],[3,"user"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-chat-sidebar"),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"app-chat-box",3),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("user",o.activeUser))},dependencies:[T,k],encapsulation:2}),s})(),F=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild([{path:"",component:q}]),g.Bz]}),s})();var O=a(8271),I=a(8639);let j=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u],imports:[c.ez,l.u5,F,O.F,m.j,f.hJ,I.TX,x.y,v.T]}),s})()}}]);